#:import myRectangelButton myRectangelButton
#:import mytextInput mytextInput

#:set label_height dp(20)
#:set spacing_padding dp(0)
#:set position_of_circle dp(20)
#:set radius dp(20)
#:set width_of_line dp(2)

<ComponentAddPairsOfAtoms>:
    id: component_add_pairs_of_atoms
    height: grid_with_atoms.height + dp(30)
    width: grid_with_atoms.width

    MDWidget:
        pos_hint: {'x': 0, 'top': 1}
        size_hint: None, None
        height: grid_with_atoms.height + dp(10)
        width: grid_with_atoms.width
        canvas.before:
            Color:
                rgba: app.theme_cls.primary_color
            Line:
                width: width_of_line
                points:
                    (self.x, self.y, self.x + self.width - position_of_circle, self.y)
            Line:
                width: width_of_line
                points:
                    (self.x , self.y + self.height, self.x + self.width -position_of_circle, self.y + self.height)
            Line:
                width: width_of_line
                circle:
                    (self.x + self.width - position_of_circle, self.y + radius, radius
                    , 90, 180)
            Line:
                width: width_of_line
                circle:
                    (self.x + self.width - position_of_circle, self.y + self.height - radius, radius
                    , 0, 90)
            Line:
                width: width_of_line
                points:
                    (self.x + self.width, self.y + radius, self.x + self.width
                    , self.y + self.height - radius)

    MDGridLayout:
        id: grid_with_atoms
        row_default_height: label_height
        size_hint_y: None
        height: component_add_pairs_of_atoms.grid_height + text_field.height
        pos_hint: {'x': 0, 'top': 1}
        padding: ["10dp", "10dp", "10dp", "10dp"]
        spacing: spacing_padding
        cols: 5

        MDLabel:
            adaptive_height: True
            text: "first atom: "
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.text_color

        MDLabel:
            adaptive_height: True
            text: "second atom: "
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.text_color

        MDLabel:
            adaptive_height: True
            text: "MBO min: "
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.text_color

        MDLabel:
            adaptive_height: True
            text: "MBO max: "
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.text_color

        MDLabel:
            adaptive_height: True
            text: "ID od bond: "
            valign: 'middle'
            theme_text_color: "Custom"
            text_color: app.theme_cls.text_color

        MyTextInput:
            id: text_field
            helper_text: "Eg. P, Fe ..."
            helper_text_mode: "persistent"
            valign: 'middle'
            on_focus: app.change_state(self)

        MyTextInput:
            helper_text: "Eg. P, Fe ..."
            helper_text_mode: "persistent"
            valign: 'middle'
            on_focus: app.change_state(self)

        MyTextInput:
            helper_text: "float number"
            helper_text_mode: "persistent"
            valign: 'middle'
            on_focus: app.change_state(self)

        MyTextInput:
            helper_text: "float number"
            helper_text_mode: "persistent"
            valign: 'middle'
            on_focus: app.change_state(self)

        MyTextInput:
            helper_text: "ID eg. '=', 'my bond' ...."
            helper_text_mode: "persistent"
            valign: 'middle'
            on_focus: app.change_state(self)
    
    MyRectangleButton:
        id: Button_x
        icon: "plus-thick"
        pos: grid_with_atoms.width - position_of_circle - dp(6) , 0
        on_press: component_add_pairs_of_atoms.add_row_of_text_input()
    
    MyRectangleButton:
        id: Button_delete
        disabled: True
        opacity: 0
        icon: "minus-thick"
        pos: grid_with_atoms.width - position_of_circle - dp(60) , 0
        on_press: component_add_pairs_of_atoms.delete_rows()

